import os
import sys
from dotenv import load_dotenv

sys.path.append(os.getcwd())

from sqlalchemy import create_engine, text, select
from sqlalchemy.orm import sessionmaker
from app.db.models import Base, Place
from app.services.ai_service import ai_instance

load_dotenv()

DATABASE_URL = os.getenv("DATABASE_URL")

if not DATABASE_URL:
    print("âŒ ì—ëŸ¬: .env íŒŒì¼ì„ ëª» ì°¾ê±°ë‚˜, ì•ˆì— DATABASE_URLì´ ì—†ì–´!")
    sys.exit(1)

engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(bind=engine)

IMAGE_FOLDER = "images" 

def init_db():
    print("ğŸš€ DB ì—°ê²° ë° ì´ˆê¸°í™”...")
    with engine.connect() as conn:
        conn.execute(text("CREATE EXTENSION IF NOT EXISTS vector"))
        conn.commit()
    Base.metadata.create_all(bind=engine)

def seed_places():
    db = SessionLocal()
    
    # 1. DBì— ì´ë¯¸ ìˆëŠ” ì‚¬ì§„ ëª©ë¡ í™•ì¸ (ì¤‘ë³µ ë°©ì§€)
    print("ğŸ“‹ ê¸°ì¡´ ë°ì´í„° í™•ì¸ ì¤‘...")
    existing_images = set(db.scalars(select(Place.image_path)).all())
    
    grouped_places = [
        # 1-0. ì„±ì‹¬ë‹¹ ë³¸ì  
        {
            "name": "ì„±ì‹¬ë‹¹ ë³¸ì ",
            "addr": "ëŒ€ì „ ì¤‘êµ¬ ëŒ€ì¢…ë¡œ480ë²ˆê¸¸ 15",
            "contents": [
                {"img": "01sungsim1.jpeg", "desc": "íŠ€ê¹€ì†Œë³´ë¡œì™€ ëª…ë€ë°”ê²ŒíŠ¸ì˜ ì„±ì§€! ëŒ€ì „ í•„ìˆ˜ ì½”ìŠ¤"},
                {"img": "01sungsim2.jpg",  "desc": "ë”¸ê¸°ì‹œë£¨ & ë§ê³ ì‹œë£¨ê°€ ìœ ëª…í•œ ë””ì €íŠ¸ ì²œêµ­"},
                {"img": "01sungsim3.jpeg", "desc": "íŠ€ê¹€ì†Œë³´ë¡œë„ ìœ ëª…í•œ ë¹µì§‘"},
                {"img": "01sungsim4.jpeg", "desc": "ë³´ë¬¸ì‚°ë©”ì•„ë¦¬ì™€ ëª…ë€ë°”ê²ŒíŠ¸ê°€ ìœ ëª…í•œ ë¹µì§‘"},
                {"img": "01sungsim5.jpg",  "desc": "ì„±ì‹¬ë‹¹"},
            ]
        },
        # 1-1. ì„±ì‹¬ë‹¹ DCCì 
        {
            "name": "ì„±ì‹¬ë‹¹ DCCì ",
            "addr": "ëŒ€ì „ ìœ ì„±êµ¬ ì—‘ìŠ¤í¬ë¡œ 107 1ì¸µ",
            "contents": [
                {"img": "01sungsim1.jpeg", "desc": "íŠ€ê¹€ì†Œë³´ë¡œì™€ ëª…ë€ë°”ê²ŒíŠ¸ì˜ ì„±ì§€! ëŒ€ì „ í•„ìˆ˜ ì½”ìŠ¤"},
                {"img": "01sungsim2.jpg",  "desc": "ë”¸ê¸°ì‹œë£¨ & ë§ê³ ì‹œë£¨ê°€ ìœ ëª…í•œ ë””ì €íŠ¸ ì²œêµ­"},
                {"img": "01sungsim3.jpeg", "desc": "íŠ€ê¹€ì†Œë³´ë¡œë„ ìœ ëª…í•œ ë¹µì§‘"},
                {"img": "01sungsim4.jpeg", "desc": "ë³´ë¬¸ì‚°ë©”ì•„ë¦¬ì™€ ëª…ë€ë°”ê²ŒíŠ¸ê°€ ìœ ëª…í•œ ë¹µì§‘"},
                {"img": "01sungsim5.jpg",  "desc": "ì„±ì‹¬ë‹¹"},
            ]
        },
        # 1-2. ì„±ì‹¬ë‹¹ ëŒ€ì „ì—­ì 
        {
            "name": "ì„±ì‹¬ë‹¹ ëŒ€ì „ì—­ì ",
            "addr": "ëŒ€ì „ ë™êµ¬ ì¤‘ì•™ë¡œ 215 2ì¸µ",
            "contents": [
                {"img": "01sungsim1.jpeg", "desc": "íŠ€ê¹€ì†Œë³´ë¡œì™€ ëª…ë€ë°”ê²ŒíŠ¸ì˜ ì„±ì§€! ëŒ€ì „ í•„ìˆ˜ ì½”ìŠ¤"},
                {"img": "01sungsim2.jpg",  "desc": "ë”¸ê¸°ì‹œë£¨ & ë§ê³ ì‹œë£¨ê°€ ìœ ëª…í•œ ë””ì €íŠ¸ ì²œêµ­"},
                {"img": "01sungsim3.jpeg", "desc": "íŠ€ê¹€ì†Œë³´ë¡œë„ ìœ ëª…í•œ ë¹µì§‘"},
                {"img": "01sungsim4.jpeg", "desc": "ë³´ë¬¸ì‚°ë©”ì•„ë¦¬ì™€ ëª…ë€ë°”ê²ŒíŠ¸ê°€ ìœ ëª…í•œ ë¹µì§‘"},
                {"img": "01sungsim5.jpg",  "desc": "ì„±ì‹¬ë‹¹"},
            ]
        },
        # 1-3. ì„±ì‹¬ë‹¹ ë¡¯ë°ë°±í™”ì  ëŒ€ì „ì 
        {
            "name": "ì„±ì‹¬ë‹¹ ë¡¯ë°ë°±í™”ì  ëŒ€ì „ì ",
            "addr": "ëŒ€ì „ ì„œêµ¬ ê³„ë£¡ë¡œ 598 1ì¸µ",
            "contents": [
                {"img": "01sungsim1.jpeg", "desc": "ë§ˆì¹˜ ìœ ëŸ½ ê±°ë¦¬ì— ì˜¨ ë“¯í•œ ë¶‰ì€ ë²½ëŒ ê±´ë¬¼! ğŸ§± ì„±ì‹¬ë‹¹ ì¼€ìµë¶€ë ë„ ì•ì—ì„œ ì¸ìƒìƒ· ì°°ì¹µ ğŸ“¸"},
                {"img": "01sungsim2.jpg",  "desc": "ë¹„ì£¼ì–¼ ì‡¼í¬! ë”¸ê¸°ê°€ ì‚°ì²˜ëŸ¼ ìŒ“ì¸ ì „ì„¤ì˜ ë”¸ê¸°ì‹œë£¨ ì¼€ì´í¬ ğŸ“ (ê¸°ë…ì¼ í•„ìˆ˜í…œ)"},
                {"img": "01sungsim3.jpeg", "desc": "ì…ì•ˆì—ì„œ ì‚¬ë¥´ë¥´ ë…¹ëŠ” ìƒë§ê³  í­íƒ„! ğŸ‹ ì›¨ì´íŒ…í•´ì„œë¼ë„ ë¨¹ì–´ì•¼ í•˜ëŠ” ë§ê³ ì‹œë£¨"},
                {"img": "01sungsim4.jpeg", "desc": "ê²‰ë°”ì†ì´‰ì˜ ì •ì„! ê³ ì†Œí•œ ë²„í„° í’ë¯¸ì™€ ì§­ì§¤í•¨ì´ í„°ì§€ëŠ” ì„±ì‹¬ë‹¹ ëª…ë¬¼ ì†Œê¸ˆë¹µ ğŸ¥"},
                {"img": "01sungsim5.jpg",  "desc": "ëŒ€ì „ì˜ ìì¡´ì‹¬! ë°”ì‚­ë°”ì‚­í•œ ì‹ê°ì´ ì¼í’ˆì¸ ì „ì„¤ì˜ íŠ€ê¹€ì†Œë³´ë¡œ (ìš°ìœ ë‘ ë¨¹ìœ¼ë©´ ê·¹ë½!) ğŸ©"},
            ]
        },

        # 2. ì—‘ìŠ¤í¬ & ì•¼ê²½ ë§›ì§‘
        {
            "name": "ëŒ€ì „ ì—‘ìŠ¤í¬ ê³¼í•™ê³µì›",
            "addr": "ëŒ€ì „ ìœ ì„±êµ¬ ëŒ€ë•ëŒ€ë¡œ 480",
            "contents": [
                {"img": "02expo1.png", "desc": "ëŒ€ì „ì˜ ìƒì§• í•œë¹›íƒ‘! íŒŒë€ í•˜ëŠ˜ ì•„ë˜ ìš°ëš ì†Ÿì€ ë¯¸ë˜ ë„ì‹œ ëŠë‚Œì˜ ëœë“œë§ˆí¬ ğŸš€"},
                {"img": "02expo2.jpeg", "desc": "ëŒ€ì „ ì•¼ê²½ ì›íƒ‘! ë¹¨ê°• íŒŒë‘ ì•„ì¹˜ê°€ ë¹›ë‚˜ëŠ” ì—‘ìŠ¤í¬ ë‹¤ë¦¬ (ê²¬ìš°ì§ë…€êµ) ğŸŒ‰ ë°ì´íŠ¸ ì½”ìŠ¤ë¡œ ê°•ì¶”!"},
                {"img": "02expo7.jpeg", "desc": "ë°¤ì— ë” í•«í•œ í•œë¹›íƒ‘ ë¬¼ë¹›ê´‘ì¥! ë°˜ì§ì´ëŠ” ì¡°ëª…ê³¼ ì‹œì›í•œ ìŒì•…ë¶„ìˆ˜ê°€ ìˆëŠ” íë§ ìŠ¤íŒŸ âœ¨"},
                {"img": "02expo8.jpeg", "desc": "ê¿ˆëŒì´ì™€ ê¿ˆìˆœì´ê°€ ë°˜ê²¨ì£¼ëŠ” ì—‘ìŠ¤í¬ ê´‘ì¥! ì•Œë¡ë‹¬ë¡ ê½ƒë°­ê³¼ ê±°ëŒ€í•œ ì¡°í˜•ë¬¼ì´ ìˆëŠ” ì‚°ì±… ëª…ì†Œ ğŸŒ·"},
            ]
        },
        {
            "name": "ëŒ€ì „ ì—‘ìŠ¤í¬ ì•„ì¿ ì•„ë¦¬ì›€",
            "addr": "ëŒ€ì „ ìœ ì„±êµ¬ ì—‘ìŠ¤í¬ë¡œ 1 ëŒ€ì „ì‹ ì„¸ê³„ ì•„íŠ¸ì•¤ì‚¬ì´ì–¸ìŠ¤ ì§€í•˜1ì¸µ",
            "contents": [
                {"img": "02expo3.jpeg", "desc": "ì¸ìƒìƒ· ë³´ì¥! ë¨¸ë¦¬ ìœ„ë¡œ ë¬¼ê³ ê¸°ê°€ ì§€ë‚˜ê°€ëŠ” ëª½í™˜ì ì¸ í•´ì € í„°ë„ ğŸ“¸"},
                {"img": "02expo4.jpeg", "desc": "ì‹ ë¹„ë¡œìš´ ë°”ë‹·ì† ì„¸ìƒ! íŒŒë€ ë¬¼ë© ë•Œë¦¬ê¸° ì¢‹ì€ ë„ì‹¬ ì† íë§ ìŠ¤íŒŸ ğŸ‹"},
                {"img": "02expo5.jpeg", "desc": "ëˆˆì„ ë—„ ìˆ˜ ì—†ëŠ” ìˆ˜ì¤‘ ë°œë ˆ ê³µì—°ê³¼ ë§ˆìˆ ì‡¼ê°€ ìˆëŠ” ê³³ âœ¨"},
                {"img": "02expo6.jpeg", "desc": "ìƒì–´ë‘ ì•„ì´ì»¨íƒ ê°€ëŠ¥! ì•„ì´ë“¤ë„ ì¢‹ì•„í•˜ëŠ” ìŠ¤ë¦´ ë§Œì  ìˆ˜ì¤‘ íƒí—˜ ğŸ¦ˆ"},
            ]
        },
        {
            "name": "ì‹ ì„¸ê³„ ì•„íŠ¸ì•¤ì‚¬ì´ì–¸ìŠ¤",
            "addr": "ëŒ€ì „ ìœ ì„±êµ¬ ì—‘ìŠ¤í¬ë¡œ 1",
            "contents": [
                {"img": "03shinsegae1.jpeg", "desc": "ëŸ­ì…”ë¦¬í•œ ë¶„ìœ„ê¸° ëíŒì™•! ë§›ì§‘ íƒë°©ê³¼ ì‡¼í•‘ì„ í•œ ë²ˆì— í•´ê²°í•˜ëŠ” ì‹¤ë‚´ ë°ì´íŠ¸ í•„ìˆ˜ ì½”ìŠ¤ ğŸ›ï¸"},
                {"img": "03shinsegae2.jpeg", "desc": "ëŒ€ì „ì˜ ìƒˆë¡œìš´ ëœë“œë§ˆí¬! ì‡¼í•‘ê³¼ ì˜ˆìˆ , ê³¼í•™ì´ ë§Œë‚œ ë³µí•© ë¬¸í™” ê³µê°„ì˜ ì›…ì¥í•œ ì™¸ê´€ ğŸ¢"},
                {"img": "03shinsegae3.jpeg", "desc": "ê°‘ì²œì´ í•œëˆˆì— ë‚´ë ¤ë‹¤ë³´ì´ëŠ” íƒ íŠ¸ì¸ ë·°! ë…¸ì„ ì§ˆ ë•Œ ê°€ì¥ ì˜ˆìœ í•˜ëŠ˜ê³µì› & ì „ë§ëŒ€ ğŸŒ…"},
            ]
        },
        {
            "name": "ì‹ì¥ì‚° ì „ë§ëŒ€",
            "addr": "ëŒ€ì „ ë™êµ¬ ì„¸ì²œê³µì›ë¡œ 32-836",
            "contents": [
                {"img": "04sikjang1.jpeg", "desc": "ë³´ì„ì„ ë¿Œë ¤ë†“ì€ ë“¯í•œ í™©í™€í•œ ë„ì‹œ ì•¼ê²½ ğŸŒƒ ëŒ€ì „ ì‹œë‚´ê°€ í•œëˆˆì— ë“¤ì–´ì˜¤ëŠ” ìµœê³ ì˜ ë“œë¼ì´ë¸Œ ì½”ìŠ¤"},
                {"img": "04sikjang2.jpeg", "desc": "íƒ íŠ¸ì¸ í•˜ëŠ˜ê³¼ ë©‹ì§„ í•œì˜¥ ì •ì(ì‹ì¥ë£¨) ğŸ¯ ê°€ìŠ´ì´ ë»¥ ëš«ë¦¬ëŠ” ì‹œì›í•œ ë§ˆìš´í‹´ ë·°ì™€ ê³ ì¦ˆë„‰í•œ ë¶„ìœ„ê¸°"},
            ]
        },

        # 3. íë§ & ìì—°
        {
            "name": "í•œë°­ìˆ˜ëª©ì›",
            "addr": "ëŒ€ì „ ì„œêµ¬ ë‘”ì‚°ëŒ€ë¡œ 169",
            "contents": [
                {"img": "05hanbat_arboretum1.jpeg", "desc": "ë„ì‹¬ ì† íë§ íƒ€ì„! ğŸŒ¿ ì‹œì›í•œ ë¶„ìˆ˜ì™€ ì •ìê°€ ìˆëŠ” í‰í™”ë¡œìš´ í˜¸ìˆ˜ í’ê²½ (í”¼í¬ë‹‰ ë§¤íŠ¸ í´ê³  ëˆ•ê³  ì‹¶ë‹¤)"},
                {"img": "05hanbat_arboretum2.jpeg", "desc": "ì¥ë¯¸ê½ƒì´ ë§Œë°œí•œ ë¡œë§¨í‹±í•œ ê½ƒ í„°ë„! ğŸŒ¹ ë§‰ ì°ì–´ë„ ì¸ìƒìƒ· ë‚˜ì˜¤ëŠ” ì˜ˆìœ ì •ì› (ê½ƒêµ¬ê²½ ë°ì´íŠ¸ëŠ” ì—¬ê¸°ë¡œ)"},
            ]
        },
        {
            "name": "ì¥íƒœì‚° ìì—°íœ´ì–‘ë¦¼",
            "addr": "ëŒ€ì „ ì„œêµ¬ ì¥ì•ˆë¡œ 461",
            "contents": [
                {"img": "06jangtaesan1.jpg", "desc": "ë¹™ê¸€ë¹™ê¸€ ì˜¬ë¼ê°€ëŠ” ì¬ë¯¸ê°€ ìˆëŠ” ìŠ¤ì¹´ì´íƒ€ì›Œ! ğŸ—¼ ê¼­ëŒ€ê¸°ì—ì„œ ë‚´ë ¤ë‹¤ë³´ëŠ” ìˆ² ë·°ê°€ ì§„ì§œ ê°€ìŠ´ ë»¥ ëš«ë¦¼ (ê³ ì†Œê³µí¬ì¦ ì£¼ì˜)"},
                {"img": "06jangtaesan2.jpg", "desc": "í˜¸ìˆ˜ ìœ„ì— ë¹„ì¹œ ë¶‰ì€ ë©”íƒ€ì„¸ì½°ì´ì–´ ìˆ²ì´ í•œ í­ì˜ ê·¸ë¦¼ ê°™ì€ ê³³! ğŸ‚ ë°”ë¼ë§Œ ë´ë„ íë§ë˜ëŠ” ê°€ì„ ì¸ìƒìƒ· ëª…ì†Œ"},
                {"img": "06jangtaesan3.jpg", "desc": "ë‚˜ë¬´ ê¼­ëŒ€ê¸°ë¥¼ ê±·ëŠ” ê¸°ë¶„! â˜ï¸ ì•„ì°”í•˜ê³  ìŠ¤ë¦´ ë„˜ì¹˜ëŠ” ì¶œë ë‹¤ë¦¬ ìŠ¤ì¹´ì´ì›¨ì´ (ì—¬ê¸°ì„œ ì‚¬ì§„ ì°ìœ¼ë©´ ë¬´ì¡°ê±´ ì¸ìƒìƒ·)"},
                {"img": "06jangtaesan4.jpg", "desc": "í”¼í†¤ì¹˜ë“œ í’€ì¶©ì „ ì™„ë£Œ! ğŸŒ¿ ì´ˆë¡ì´ˆë¡í•œ ë©”íƒ€ì„¸ì½°ì´ì–´ ìˆ²ê¸¸ê³¼ í‰í™”ë¡œìš´ ì—°ëª» ì‚°ì±… (íë§ì´ í•„ìš”í•  ë• ë¬´ì¡°ê±´ ì—¬ê¸°)"},
            ]
        },

        # {
        #     "name": "ê³„ì¡±ì‚° í™©í†³ê¸¸",
        #     "desc": "ë§¨ë°œë¡œ ê±·ëŠ” ë¶‰ì€ í™©í†³ê¸¸ íŠ¸ë ˆí‚¹",
        #     "img": "gyejoksan_redclay.jpg",
        #     "addr": "ëŒ€ì „ ëŒ€ë•êµ¬ ì¥ë™ ì‚°91"
        # },
        # {
        #     "name": "ëŒ€ì²­í˜¸ë°˜",
        #     "desc": "íƒ íŠ¸ì¸ í˜¸ìˆ˜ ë·°ì™€ ë¶„ìœ„ê¸° ì¢‹ì€ ì¹´í˜ë“¤ì´ ìˆëŠ” ê³³",
        #     "img": "daecheong_lake.jpg",
        #     "addr": "ëŒ€ì „ ëŒ€ë•êµ¬ ëŒ€ì²­ë¡œ 618-136"
        # },
        # {
        #     "name": "ìœ ì„±ì˜¨ì²œ ì¡±ìš•ì²´í—˜ì¥",
        #     "desc": "ì—¬í–‰ì˜ í”¼ë¡œë¥¼ í‘¸ëŠ” ë”°ëˆë”°ëˆ ì•¼ì™¸ ì¡±ìš•íƒ•",
        #     "img": "yuseong_hotspring.jpg",
        #     "addr": "ëŒ€ì „ ìœ ì„±êµ¬ ë´‰ëª…ë™ 574"
        # },
        # {
        #     "name": "ë¿Œë¦¬ê³µì›",
        #     "desc": "ë‚˜ì˜ ë¿Œë¦¬ë¥¼ ì°¾ëŠ” íš¨ í…Œë§ˆ ê³µì› (ì•¼ê²½ë„ ì˜ˆì¨)",
        #     "img": "ppuri_park.jpg",
        #     "addr": "ëŒ€ì „ ì¤‘êµ¬ ë¿Œë¦¬ê³µì›ë¡œ 79"
        # },
        # {
        #     "name": "ì˜¤ì›”ë“œ",
        #     "desc": "ë™ë¬¼ì›ê³¼ í”Œë¼ì›Œëœë“œ, ì‚¬íŒŒë¦¬ê°€ ìˆëŠ” í…Œë§ˆíŒŒí¬",
        #     "img": "oworld.jpg",
        #     "addr": "ëŒ€ì „ ì¤‘êµ¬ ì‚¬ì •ê³µì›ë¡œ 70"
        # },

        # # --- â˜• [4. í™í”Œ & ë¬¸í™”] ---
        # {
        #     "name": "ì†Œì œë™ ì¹´í˜ê±°ë¦¬",
        #     "desc": "ì˜› ê´€ì‚¬ì´Œì„ ê°œì¡°í•œ ê°ì„± ê°€ë“í•œ ì¹´í˜ ê³¨ëª©",
        #     "img": "soje_street.jpg",
        #     "addr": "ëŒ€ì „ ë™êµ¬ ì†Œì œë™"
        # },
        # {
        #     "name": "ìœ¼ëŠ¥ì •ì´ ìŠ¤ì¹´ì´ë¡œë“œ",
        #     "desc": "ê±°ëŒ€í•œ LED ì²œì¥ì´ ìˆëŠ” ëŒ€ì „ì˜ ëª…ë™",
        #     "img": "skyroad.jpg",
        #     "addr": "ëŒ€ì „ ì¤‘êµ¬ ì¤‘ì•™ë¡œ164ë²ˆê¸¸ 21-13"
        # },
        # {
        #     "name": "ëŒ€ì „ì˜ˆìˆ ì˜ì „ë‹¹",
        #     "desc": "ì´ì‘ë…¸ ë¯¸ìˆ ê´€ê³¼ í•¨ê»˜ ì˜ˆìˆ  ê°ì„± ì¶©ì „í•˜ëŠ” ê³³",
        #     "img": "art_center.jpg",
        #     "addr": "ëŒ€ì „ ì„œêµ¬ ë‘”ì‚°ëŒ€ë¡œ 135"
        # },
        # {
        #     "name": "ë™ì¶˜ë‹¹",
        #     "desc": "ê³ ì¦ˆë„‰í•œ í•œì˜¥ì˜ ë©‹ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ì—­ì‚¬ ê³µì›",
        #     "img": "dongchundang.jpg",
        #     "addr": "ëŒ€ì „ ëŒ€ë•êµ¬ ë™ì¶˜ë‹¹ë¡œ 80"
        # },

        # # --- ğŸœ [5. ëŒ€ì „ì˜ ë§›] ---
        # {
        #     "name": "ì˜¤ì”¨ì¹¼êµ­ìˆ˜",
        #     "desc": "ë¬¼ì´ì¡°ê°œê°€ ì‚°ë”ë¯¸ì²˜ëŸ¼ ë“¤ì–´ê°„ ëŒ€ì „ ëª…ë¬¼ ì¹¼êµ­ìˆ˜",
        #     "img": "kalguksu.jpg",
        #     "addr": "ëŒ€ì „ ë™êµ¬ ì˜›ì‹ íƒ„ì§„ë¡œ 13"
        # },
        # {
        #     "name": "ê´‘ì²œì‹ë‹¹",
        #     "desc": "ë§¤ì½¤í•œ ì–‘ë…ì´ ì¤‘ë…ì ì¸ ë‘ë¶€ë‘ë£¨ì¹˜ê¸°",
        #     "img": "tofu_duruchigi.jpg",
        #     "addr": "ëŒ€ì „ ì¤‘êµ¬ ëŒ€ì¢…ë¡œ505ë²ˆê¸¸ 29"
        # },
        # {
        #     "name": "íƒœí‰ì†Œêµ­ë°¥",
        #     "desc": "ìœ¡ì‚¬ì‹œë¯¸ì™€ êµ­ë°¥ì´ ëë‚´ì£¼ëŠ” ì¤„ ì„œëŠ” ë§›ì§‘",
        #     "img": "beef_soup.jpg",
        #     "addr": "ëŒ€ì „ ìœ ì„±êµ¬ ì˜¨ì²œë™ë¡œ65ë²ˆê¸¸ 50"
        # },
        # {
        #     "name": "ì¤‘ì•™ì‹œì¥",
        #     "desc": "ëŒ€ì „ì˜ ì •ì´ ë„˜ì¹˜ëŠ” ì „í†µì‹œì¥ (ìŠ¤ëª¨í‚¤ë²„ê±°, ë§Œë‘)",
        #     "img": "central_market.jpg",
        #     "addr": "ëŒ€ì „ ë™êµ¬ ëŒ€ì „ë¡œ 783"
        # }
    ]

    print(f"ğŸš€ '{IMAGE_FOLDER}' í´ë” ìŠ¤ìº” ë° í•™ìŠµ ì‹œì‘...")
    
    count = 0
    # ì²« ë²ˆì§¸ ë£¨í”„: ì¥ì†Œë³„ë¡œ ëŒê¸°
    for place in grouped_places:
        common_name = place["name"]
        common_addr = place["addr"]
        
        # ë‘ ë²ˆì§¸ ë£¨í”„: ê·¸ ì¥ì†Œ ì•ˆì˜ ì‚¬ì§„ë“¤ êº¼ë‚´ê¸°
        for item in place["contents"]:
            image_file = item["img"]
            description = item["desc"]

            # ì¤‘ë³µ ì²´í¬
            if image_file in existing_images:
                print(f"â© íŒ¨ìŠ¤: {image_file} (ì´ë¯¸ ì•„ëŠ” ì‚¬ì§„)")
                continue

            file_path = os.path.join(IMAGE_FOLDER, image_file)
            
            if not os.path.exists(file_path):
                print(f"âŒ íŒŒì¼ ì—†ìŒ: {file_path}")
                continue
                
            try:
                print(f"ğŸ“¸ í•™ìŠµ ì¤‘: {common_name} - {image_file}")
                with open(file_path, "rb") as f:
                    img_bytes = f.read()
                    
                vector = ai_instance.image_to_vector(img_bytes)
                
                if vector:
                    new_place = Place(
                        name=common_name,       # ê³µí†µ ì´ë¦„
                        address=common_addr,    # ê³µí†µ ì£¼ì†Œ
                        description=description, # ê°œë³„ ì„¤ëª…
                        image_path=image_file,   # ê°œë³„ ì‚¬ì§„
                        embedding=vector
                    )
                    db.add(new_place)
                    count += 1
                    
            except Exception as e:
                print(f"âš ï¸ ì—ëŸ¬: {e}")
    
    if count > 0:
        db.commit()
        print(f"ğŸ‰ {count}ì¥ì˜ ì‚¬ì§„ì„ ìƒˆë¡œ í•™ìŠµí–ˆì–´!")
    else:
        print("ğŸ’¤ ìƒˆë¡œ í•™ìŠµí•  ê²Œ ì—†ë„¤!")
        
    db.close()

if __name__ == "__main__":
    init_db()
    seed_places()